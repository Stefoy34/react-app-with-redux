# .github/workflows/ci.yml

name: Forum App CI

on:
  push:
    # Sesuaikan 'master' dengan nama branch utama Anda (bisa 'main')
    branches: [ "master" ]
  pull_request:
    # Sesuaikan 'master' dengan nama branch utama Anda (bisa 'main')
    branches: [ "master" ]

jobs:
  build_and_test:
    # Job ini akan berjalan di server Ubuntu
    runs-on: ubuntu-latest

    steps:
      # Langkah 1: Mengambil kode Anda dari repository
      - name: Checkout code
        uses: actions/checkout@v3

      # Langkah 2: Menyiapkan environment Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          # Gunakan versi Node yang stabil (sesuai dengan environment Anda)
          node-version: 18

      # Langkah 3: Menginstal semua dependensi (npm install)
      - name: Install dependencies
        run: npm install

      # # Langkah 4: Menjalankan unit test (Vitest)
      # # Ini akan menjalankan "vitest" sesuai package.json
      # - name: Run unit tests
      #   run: npm test

      # Langkah 5: Membangun proyek (Vite build)
      # Ini memastikan aplikasi Anda bisa di-build tanpa error
      - name: Build project
        run: npm run build